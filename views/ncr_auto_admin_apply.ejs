<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/ncr_auto_admin_apply.css">
    <link rel="stylesheet" href="css/fontawesome/all.min.css">
    <link rel="stylesheet" href="Datatables/datatables.min.css" />
    <link rel="stylesheet" href="css/jquery/jquery-ui.css">

    <script type="text/javascript" src="js/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-1.12.4.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-ui.js"></script>
    <script type="text/javascript" src="Datatables/datatables.min.js"></script>

    <link rel="stylesheet" href="css/datetimepicker/jquery.datetimepicker.min.css">
    <script type="text/javascript" src="js/datetimepicker/jquery.datetimepicker.js"></script>

    <script type="text/javascript" src="js/bootstrap/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css">

    <script type="text/javascript" src="js/fontawesome/all.min.js"></script>

    <script type="text/javascript" src="js/sweetalert/sweetalert2.min.js"></script>
    <script type="text/javascript" src="js/helper.js"></script>

    <title>NCR Auto Admin Apply</title>
</head>

<body>
    <div class="mb-2" id="pnlHeader">
        <h2 class="ms-2 fw-bold">LIST OF NCR AUTO ADMIN APPLY</h2>
    </div>






    <div class="d-flex" id="pnlContentTableView">
        <div class="box-shadow4 rounded w-50 m-1">
            <div class="title text-center fs-4 bg-primary text-co fw-bold" style="color: white;">
                ระดับโครงการ
            </div>

            <div class="m-1 rounded-2 p-2 grid-items-left mb-2 d-flex" id="pnlButton">
                <div class="d-flex justify-content-start w-50">

                    <button type="button" class="btn btn-primary me-2 rounded-2" data-bs-toggle="modal"
                        data-bs-target="#modalNCRAutoAdminApplyProjectDataEntry" role="button"
                        id="btnNCRAutoAdminApplyProjectAdd">
                        <i class="fas fa-plus"></i>
                        Add
                    </button>
                    <button class="btn btn-secondary me-2 " data-bs-toggle="modal"
                        data-bs-target="#modalNCRAutoAdminApplyProjectDataEntry" role="button"
                        id="btnNCRAutoAdminApplyProjectEdit">
                        <i class="fas fa-edit"></i>
                        Edit
                    </button>
                    <button class="btn btn-danger me-2" id="btnNCRAutoAdminApplyProjectDelete">
                        <i class="fas fa-trash-alt"></i>
                        Delete
                    </button>
                </div>
                <div class="d-flex justify-content-end w-50">

                    <button class="btn btn-secondary me-2" onclick="" id="btnResetNCRAutoAdminApplyProject">
                        <i class="fas fa-redo"></i>
                        Reset
                    </button>
                </div>


            </div>

            <div class="table-content m-2 p-1 box-shadow4 rounded">
                <table id="project_apply_table" class="table table-striped table-bordered table-hover w-100">
                    <thead class="position-sticky top-0">
                        <tr>
                            <th class="text-center align-middle">ID</th>
                            <th class="text-center align-middle">ID_Project</th>
                            <th class="text-center align-middle">Project Name</th>
                            <th class="text-center align-middle">NCRAutoAdminTopic</th>
                            <th class="text-center align-middle">Product</th>
                            <th class="text-center align-middle">IsDry</th>
                            <th class="text-center align-middle">Admin Name</th>
                            <th class="text-center align-middle">Reason</th>
                            <th class="text-center align-middle">Date Start</th>
                            <th class="text-center align-middle">Date End</th>
                            <th class="text-center align-middle">Update Date</th>
                        </tr>
                    </thead>
                    <tbody id="project_apply_body">

                    </tbody>
                </table>

            </div>

        </div>

        <div class="box-shadow4 w-50 rounded m-1">
            <div class="title text-center fs-4 bg-secondary fw-bold" style="color: white;">
                ระดับเสาเข็ม
            </div>

            <div class="m-1 rounded-2 p-2 grid-items-left mb-2 d-flex" id="pnlButton">
                <div class="d-flex justify-content-start w-50">

                    <button type="button" class="btn btn-primary me-2 rounded-2" data-bs-toggle="modal"
                        data-bs-target="#modalNCRAutoAdminApplyDataEntry" role="button" id="btnNCRAutoAdminApplyAdd">
                        <i class="fas fa-plus"></i>
                        Add
                    </button>
                    <button class="btn btn-secondary me-2 " data-bs-toggle="modal"
                        data-bs-target="#modalNCRAutoAdminApplyDataEntry" role="button" id="btnNCRAutoAdminApplyEdit">
                        <i class="fas fa-edit"></i>
                        Edit
                    </button>
                    <button class="btn btn-danger me-2" id="btnNCRAutoAdminApplyDelete">
                        <i class="fas fa-trash-alt"></i>
                        Delete
                    </button>
                </div>
                <div class="d-flex justify-content-end w-50">

                    <button class="btn btn-secondary me-2" onclick="" id="btnResetNCRAutoAdminApply">
                        <i class="fas fa-redo"></i>
                        Reset
                    </button>
                </div>


            </div>

            <div class="table-content m-2 p-1 box-shadow4 rounded">
                <table id="apply_table" class="table table-striped table-bordered table-hover w-100">
                    <thead class="position-sticky top-0">
                        <tr>
                            <th class="text-center align-middle">ID</th>
                            <th class="text-center align-middle">ID_ProductItem</th>
                            <th class="text-center align-middle">Product No</th>
                            <th class="text-center align-middle">NCR Admin Name </th>
                            <th class="text-center align-middle">Reason</th>
                            <th class="text-center align-middle">Date Start</th>
                            <th class="text-center align-middle">Date End</th>
                        </tr>
                    </thead>
                    <tbody id="apply_body">

                    </tbody>
                </table>

            </div>

        </div>
    </div>
    <div class="d-flex justify-content-between" id="pnlDetail">

        <div class="ms-2">
            <i class="fas fa-user me-1"></i>
            Login by : FName LName<b> [ Role/Plant ] </b>
        </div>
        <div class="me-2">
            Developed by : <b>
                <%=developer%>
            </b>
            <!-- <img src="file/img/redtech_logo.png" class="img-fluid" style="height: 30px;width: 80px;"> -->
        </div>


    </div>

    <!-- modal Project -->
    <div class="modal fade bd-example-modal-fullscreen" id="modalNCRAutoAdminApplyProjectDataEntry" aria-hidden="true"
        aria-labelledby="exampleModalToggleLabel">
        <div class="modal-dialog modal-fullscreen page_font_family" id="ModalNCRAutoAdminApplyProject">
            <div class="modal-content">
                <div class="modal-header display-ncr-auto-topic-header p-0">
                    <h3 class="modal-title">
                        <span id="modal-title-label">APPLY PROJECT</span>
                        <span id="modal-title-label-control">NONE</span>

                    </h3>

                    <div class="btn" data-bs-dismiss="modal" aria-label="Close">

                        <i class="fas fa-window-close fa-2x"></i>
                    </div>
                </div>
                <div class="p-1 pb-0 modal-body overflow-hidden">
                    <div class="input-group input-group-form me-4">
                        <span class="input-group-text span-layout text-end">NCR Auto Topic</span>
                        <select class="form-select" id="selNCRAutoTopic_Entry">

                        </select>

                    </div>
                    <br>
                    <br>


                    <div class="input-group input-group-form">
                        <span class="input-group-text span-layout text-end">Name</span>
                        <input type="text" class="form-control" name="edtName_Entry" id="edtName_Entry"
                            placeholder="Name" />

                    </div>
                    <div class="input-group input-group-form">
                        <span class="input-group-text span-layout text-end">NCR_Message_TH</span>
                        <input type="text" class="form-control" name="edtNCR_Message_TH_Entry"
                            id="edtNCR_Message_TH_Entry" placeholder="NCR_Message_TH" />

                    </div>
                    <div class="input-group input-group-form">
                        <span class="input-group-text span-layout text-end">NCR_Message_EN</span>
                        <input type="text" class="form-control" name="edtNCR_Message_EN_Entry"
                            id="edtNCR_Message_EN_Entry" placeholder="NCR_Message_EN" />

                    </div>
                    <div class="input-group input-group-form">
                        <span class="input-group-text span-layout text-end">Formula</span>
                        <input type="text" class="form-control" name="edtFormula_Entry" id="edtFormula_Entry"
                            placeholder="Formula" />

                    </div>

                    <div class="input-group input-group-form">
                        <span class="input-group-text span-layout text-end">Detail</span>
                        <textarea class="form-control" name="edtDetail_Entry" id="edtDetail_Entry"
                            placeholder="Detail"></textarea>
                    </div>
                    <div class="input-group input-group-form">
                        <span class="input-group-text span-layout text-end">Remark</span>
                        <textarea class="form-control" name="edtRemark_Entry" id="edtRemark_Entry"
                            placeholder="Remark"></textarea>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="chkCancel_Entry">
                        <label class="form-check-label" for="chkCancel_Entry">
                            Cancel
                        </label>
                    </div>





                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" btnPartSave
                        onclick="dataEntry_NCRAutoAdminApplyProject()">
                        <i class="fas fa-save"></i>
                        Save
                    </button>
                    <button type="button" class="btn btn-secondary"
                        data-bs-target="#modalNCRAutoAdminApplyProjectDataEntry" data-bs-toggle="modal"
                        data-bs-dismiss="modal" id="btnNCRAutoAdminApplyProjectClose">
                        <i class="fas fa-window-close"></i>
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- modal Product -->
    <div class="modal fade bd-example-modal-fullscreen" id="modalNCRAutoAdminApplyDataEntry" aria-hidden="true"
        aria-labelledby="exampleModalToggleLabel">
        <div class="modal-dialog modal-fullscreen page_font_family" id="ModalNCRAutoAdminApply">
            <div class="modal-content">
                <div class="modal-header display-ncr-auto-topic-header p-0">
                    <h3 class="modal-title">
                        <span id="modal-title-label">APPLY PRODUCT</span>
                        <span id="modal-title-label-control-product">NONE</span>

                    </h3>

                    <div class="btn" data-bs-dismiss="modal" aria-label="Close">

                        <i class="fas fa-window-close fa-2x"></i>
                    </div>
                </div>
                <div class="p-1 pb-0 modal-body overflow-hidden">
                    <div class="input-group input-group-form me-4">
                        <span class="input-group-text span-layout text-end">NCR Auto Admin Topic</span>
                        <select class="form-select" id="selNCRAutoAdminTopicProduct_Entry">

                        </select>

                    </div>
                    <div class="d-flex justify-content-center" id="pnlSelectProductApply">
                        <div class="box-shadow4 rounded m-1" style="width: 47%;">
                            <div class="title text-center fs-4 bg-secondary fw-bold" style="color: white;">
                                เลือกเสาเข็ม
                            </div>

                            <div class="box-shadow4 m-1 mb-2 rounded-2 p-2 overflow-auto d-flex" id="pnlApplySearch">
                                <div class="w-75">

                                    <div class="input-group me-1 mb-1">
                                        <span for="edtProject_Search"
                                            class="input-group-text span-layout search-border text-end"
                                            style="width: 100px;">ชื่อโครงการ</span>
                                        <input type="text" class="form-control search-border" name="edtProject_Search"
                                            id="edtProject_Search" placeholder="ชื่อโครงการ" />
                                    </div>
                                    <div class="d-flex w-100">

                                        <div class="input-group me-1 mb-1 w-50">
                                            <span for="edtProductItemNo_Search"
                                                class="input-group-text span-layout search-border text-end"
                                                style="width: 100px;">เลขเสาเข็ม</span>
                                            <input type="text" class="form-control search-border"
                                                name="edtProductItemNo_Search" id="edtProductItemNo_Search"
                                                placeholder="เลขเสาเข็ม" />
                                        </div>
                                        <div class="input-group me-1 mb-1 w-50">
                                            <span for="edtProductType_Search"
                                                class="input-group-text span-layout search-border text-end"
                                                style="width: 100px;">ประเภทเข็ม</span>
                                            <input type="text" class="form-control search-border"
                                                name="edtProductType_Search" id="edtProductType_Search"
                                                placeholder="ประเภทเข็ม" />
                                        </div>
                                    </div>
                                </div>
                                <div class="w-25 ms-1">
                                    <div class="mb-1">

                                        <button type="button" class="btn btn-primary me-2 rounded-2 w-100" role="button"
                                            onclick="showDataProductItemList()" id="btnSearchSelectProductItem">
                                            <i class="fas fa-search"></i>
                                            Search
                                        </button>
                                    </div>
                                    <div class="mb-1">

                                        <button class="btn btn-secondary me-2 w-100" onclick="resetProductItem()"
                                            id="btnResetSelectProductItem">
                                            <i class="fas fa-redo"></i>
                                            Reset
                                        </button>
                                    </div>
                                </div>




                            </div>

                            <div class="table-content m-1 p-1 box-shadow4 rounded overflow-auto"
                                id="pnlTableSelectProduct">
                                <table id="select_apply_table"
                                    class="table table-striped table-bordered table-hover w-100">
                                    <thead class="position-sticky top-0">
                                        <tr>
                                            <th class="text-center align-middle">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value=""
                                                        id="chkSelectAll_ProductItem">
                                                    <label class="form-check-label" for="flexCheckDefault">
                                                        All
                                                    </label>
                                                </div>
                                            </th>
                                            <th class="text-center align-middle">ID</th>
                                            <th class="text-center align-middle">ItemNo</th>
                                            <th class="text-center align-middle">Project</th>
                                            <th class="text-center align-middle">ProductType</th>
                                        </tr>
                                    </thead>
                                    <tbody id="selecting_apply_body">

                                    </tbody>
                                </table>

                            </div>
                        </div>
                        <div class="m-1 box-btn-select-apply" style="width: 6%;">
                            <button class="btn btn-primary mb-4" id="btnSelectedProductItem"
                                onclick="selectedProductItem()">
                                เลือก
                                <i class="fas fa-long-arrow-alt-right"></i>
                            </button>
                            <button class="btn btn-danger" id="btnDeselectProductItem"
                                onclick="deselectedProductItem()">
                                <i class="fas fa-long-arrow-alt-left"></i>
                                ยกเลิก
                            </button>

                        </div>
                        <div class="box-shadow4 rounded m-1" style="width: 47%;">
                            <div class="title text-center fs-4 bg-secondary fw-bold" style="color: white;">
                                เสาเข็มที่ถูกเลือก
                            </div>
                            <div class="table-content m-1 p-1 box-shadow4 rounded overflow-auto"
                                id="pnlTableSelectedProduct">
                                <table id="selected_apply_table"
                                    class="table table-striped table-bordered table-hover w-100">
                                    <thead class="position-sticky top-0">
                                        <tr>
                                            <th class="text-center align-middle">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value=""
                                                        id="chkDeselectAll_ProductItem">
                                                    <label class="form-check-label" for="flexCheckDefault">
                                                        All
                                                    </label>
                                                </div>
                                            </th>
                                            <th class="text-center align-middle">ID</th>
                                            <th class="text-center align-middle">ItemNo</th>
                                            <th class="text-center align-middle">Project</th>
                                            <th class="text-center align-middle">ProductType</th>
                                        </tr>
                                    </thead>
                                    <tbody id="selected_apply_body">

                                    </tbody>
                                </table>

                            </div>
                        </div>

                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" role="button" onclick="modalConfirm('PRODUCT')">
                        <i class="fas fa-check"></i>
                        Apply
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        id="btnNCRAutoAdminApplyClose">
                        <i class="fas fa-window-close"></i>
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- modal confirm -->
    <div class="modal fade " id="modalConfirmApply" aria-hidden="true" aria-labelledby="exampleModalToggleLabel">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg  page_font_family "
            id="ModalConfirmApply">
            <div class="modal-content">
                <div class="modal-header display-ncr-auto-topic-header p-0">
                    <h3 class="modal-title">
                        <span id="modal-title-label">CONFIRM APPLY</span>


                    </h3>

                    <div class="btn" data-bs-dismiss="modal" aria-label="Close">

                        <i class="fas fa-window-close fa-2x"></i>
                    </div>
                </div>
                <div class="p-1 pb-0 modal-body overflow-hidden">

                    <div class="d-flex mb-2">
                        <div class="input-group input-group-form w-50 me-2">
                            <span class="input-group-text span-layout text-end">วันที่เริ่มใช้</span>
                            <input type="datetime-local" class="form-control" name="dtpStartDate" id="dtpStartDate"
                                />
    
                        </div>
                        <div class="input-group input-group-form w-50">
                            <span class="input-group-text span-layout text-end">วันที่สิ้นสุด</span>
                            <input type="datetime-local" class="form-control" name="dtpEndDate" id="dtpEndDate"
                                />
    
                        </div>
                    </div>
                    <div class="input-group input-group-form mb-2">
                        <span class="input-group-text span-layout text-end">พนักงานที่ร้องขอ</span>
                        <input type="text" class="form-control" name="edtFormula_Entry" id="edtEmployeeRequest"
                            placeholder="พนักงานที่ร้องขอ" />

                    </div>
                    <div class="input-group input-group-form mb-2">
                        <span class="input-group-text span-layout text-end">เหตุผล</span>
                        <textarea class="form-control" name="edtReason" id="edtReason"
                            placeholder="เหตุผล"></textarea>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" btnPartSave onclick="dataEntry_NCRAutoAdminApply()">
                        <i class="fas fa-check"></i>
                        Confirm
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close" id="btnConfirmApplyClose">
                        <i class="fas fa-window-close"></i>
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>




</body>
<script>
    let myDomain = '<%=host%>:<%=port%>'
    let urlNCRAutoAdminProjectApply = `http://${myDomain}/ncr_auto_admin_project_apply_api/`
    let urlNCRAutoAdminApply = `http://${myDomain}/ncr_auto_admin_apply_api/`
    let urlProductItemList = `http://${myDomain}/product_item_list_api/`
    let urlNCRAutoAdminTopic = `http://${myDomain}/ncr_auto_admin_topic_api/`

</script>

<script type="text/javascript" src="js/ncr_auto_admin_apply.js"></script>
<script type="text/javascript" src="js/ncr_auto_admin_project_apply.js"></script>

</html>